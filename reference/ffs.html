<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Forward feature selection — ffs • CAST</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Forward feature selection — ffs"><meta name="description" content="A simple forward feature selection algorithm"><meta property="og:description" content="A simple forward feature selection algorithm"><meta property="og:image" content="https://hannameyer.github.io/CAST/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CAST</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cast01-CAST-intro.html">1. Introduction to CAST</a></li>
    <li><a class="dropdown-item" href="../articles/cast02-plotgeodist.html">2. Visualization of nearest neighbor distance distributions</a></li>
    <li><a class="dropdown-item" href="../articles/cast03-CV.html">3. Nearest neighbor distance matching Cross-validation in CAST</a></li>
    <li><a class="dropdown-item" href="../articles/cast04-AOA-tutorial.html">4. Area of applicability of spatial prediction models</a></li>
    <li><a class="dropdown-item" href="../articles/cast05-parallel.html">5. Improve computation time of CAST methods</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/HannaMeyer/CAST/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Forward feature selection</h1>
      <small class="dont-index">Source: <a href="https://github.com/HannaMeyer/CAST/blob/master/R/ffs.R" class="external-link"><code>R/ffs.R</code></a></small>
      <div class="d-none name"><code>ffs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A simple forward feature selection algorithm</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ffs</span><span class="op">(</span></span>
<span>  <span class="va">predictors</span>,</span>
<span>  <span class="va">response</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>  metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/is.bool.html" class="external-link">is.factor</a></span><span class="op">(</span><span class="va">response</span><span class="op">)</span>, <span class="st">"Accuracy"</span>, <span class="st">"RMSE"</span><span class="op">)</span>,</span>
<span>  maximize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"RMSE"</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  globalval <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  withinSE <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  minVar <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  trControl <span class="op">=</span> <span class="fu">caret</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  tuneLength <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  tuneGrid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-metric">metric<a class="anchor" aria-label="anchor" href="#arg-metric"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-maximize">maximize<a class="anchor" aria-label="anchor" href="#arg-maximize"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-globalval">globalval<a class="anchor" aria-label="anchor" href="#arg-globalval"></a></dt>
<dd><p>Logical. Should models be evaluated based on 'global' performance? See <code><a href="global_validation.html">global_validation</a></code></p></dd>


<dt id="arg-withinse">withinSE<a class="anchor" aria-label="anchor" href="#arg-withinse"></a></dt>
<dd><p>Logical Models are only selected if they are better than the
currently best models Standard error</p></dd>


<dt id="arg-minvar">minVar<a class="anchor" aria-label="anchor" href="#arg-minvar"></a></dt>
<dd><p>Numeric. Number of variables to combine for the first selection.
See Details.</p></dd>


<dt id="arg-trcontrol">trControl<a class="anchor" aria-label="anchor" href="#arg-trcontrol"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-tunelength">tuneLength<a class="anchor" aria-label="anchor" href="#arg-tunelength"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-tunegrid">tuneGrid<a class="anchor" aria-label="anchor" href="#arg-tunegrid"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code></p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>A random number used for model training</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. Should information about the progress be printed?</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>Numeric. If &gt; 2, mclapply will be used. see <code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">mclapply</a></code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments passed to the classification or regression routine
(such as randomForest).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class train. Beside of the usual train content
the object contains the vector "selectedvars" and "selectedvars_perf"
that give the order of the best variables selected as well as their corresponding
performance (starting from the first two variables). It also contains "perf_all"
that gives the performance of all model runs.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Models with two predictors are first trained using all possible
pairs of predictor variables. The best model of these initial models is kept.
On the basis of this best model the predictor variables are iteratively
increased and each of the remaining variables is tested for its improvement
of the currently best model. The process stops if none of the remaining
variables increases the model performance when added to the current best model.</p>
<p>The forward feature selection can be run in parallel with forking on Linux systems (mclapply).
Each fork computes a model, which drastically speeds up the runtime -
especially of the initial predictor search.
The internal cross validation can be run in parallel on all systems. See information
on parallel processing of carets train functions for details.</p>
<p>Using withinSE will favour models with less variables and
probably shorten the calculation time</p>
<p>Per Default, the ffs starts with all possible 2-pair combinations.
minVar allows to start the selection with more than 2 variables, e.g.
minVar=3 starts the ffs testing all combinations of 3 (instead of 2) variables
first and then increasing the number. This is important for e.g. neural networks
that often cannot make sense of only two variables. It is also relevant if
it is assumed that the optimal variables can only be found if more than 2
are considered at the same time.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This variable selection is particularly suitable for spatial
cross validations where variable selection
MUST be based on the performance of the model for predicting new spatial units.
See Meyer et al. (2018) and Meyer et al. (2019) for further details.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Gasch, C.K., Hengl, T., Gräler, B., Meyer, H., Magney, T., Brown, D.J. (2015): Spatio-temporal interpolation of soil water, temperature, and electrical conductivity in 3D+T: the Cook Agronomy Farm data set. Spatial Statistics 14: 70-90.</p></li>
<li><p>Meyer, H., Reudenbach, C., Hengl, T., Katurji, M., Nauß, T. (2018): Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation. Environmental Modelling &amp; Software 101: 1-9.  <a href="https://doi.org/10.1016/j.envsoft.2017.12.001" class="external-link">doi:10.1016/j.envsoft.2017.12.001</a></p></li>
<li><p>Meyer, H., Reudenbach, C., Wöllauer, S., Nauss, T. (2019): Importance of spatial predictor variable selection in machine learning applications - Moving from data reproduction to spatial prediction. Ecological Modelling. 411, 108815. <a href="https://doi.org/10.1016/j.ecolmodel.2019.108815" class="external-link">doi:10.1016/j.ecolmodel.2019.108815</a>
.</p></li>
<li><p>Ludwig, M., Moreno-Martinez, A., Hölzel, N., Pebesma, E., Meyer, H. (2023): Assessing and improving the transferability of current global spatial prediction models. Global Ecology and Biogeography. <a href="https://doi.org/10.1111/geb.13635" class="external-link">doi:10.1111/geb.13635</a>
.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code>,<code><a href="bss.html">bss</a></code>,
<code><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></code>,<code><a href="CreateSpacetimeFolds.html">CreateSpacetimeFolds</a></code>,<code><a href="nndm.html">nndm</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Hanna Meyer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">splotdata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ffsmodel</span> <span class="op">&lt;-</span> <span class="fu">ffs</span><span class="op">(</span><span class="va">splotdata</span><span class="op">[</span>,<span class="fl">6</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span>, <span class="va">splotdata</span><span class="op">$</span><span class="va">Species_richness</span>, ntree <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ffsmodel</span><span class="op">$</span><span class="va">selectedvars</span></span></span>
<span class="r-in"><span><span class="va">ffsmodel</span><span class="op">$</span><span class="va">selectedvars_perf</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">ffsmodel</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#or only selected variables:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">ffsmodel</span>,plotType<span class="op">=</span><span class="st">"selected"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or perform model with target-oriented validation (LLO CV)</span></span></span>
<span class="r-in"><span><span class="co">#the example is described in Gasch et al. (2015). The ffs approach for this dataset is described in</span></span></span>
<span class="r-in"><span><span class="co">#Meyer et al. (2018). Due to high computation time needed, only a small and thus not robust example</span></span></span>
<span class="r-in"><span><span class="co">#is shown here.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># run the model on three cores (see vignette for details):</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RevolutionAnalytics/doparallel" class="external-link">doParallel</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html" class="external-link">registerDoParallel</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#load and prepare dataset:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">cookfarm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">trainDat</span> <span class="op">&lt;-</span> <span class="va">cookfarm</span><span class="op">[</span><span class="va">cookfarm</span><span class="op">$</span><span class="va">altitude</span><span class="op">==</span><span class="op">-</span><span class="fl">0.3</span><span class="op">&amp;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">cookfarm</span><span class="op">$</span><span class="va">Date</span><span class="op">)</span><span class="op">==</span><span class="fl">2012</span><span class="op">&amp;</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/week.html" class="external-link">week</a></span><span class="op">(</span><span class="va">cookfarm</span><span class="op">$</span><span class="va">Date</span><span class="op">)</span><span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span><span class="op">:</span><span class="fl">14</span><span class="op">)</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#visualize dataset:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">trainDat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Date</span>, y<span class="op">=</span><span class="va">VW</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour<span class="op">=</span><span class="va">SOURCEID</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#create folds for Leave Location Out Cross Validation:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="CreateSpacetimeFolds.html">CreateSpacetimeFolds</a></span><span class="op">(</span><span class="va">trainDat</span>,spacevar <span class="op">=</span> <span class="st">"SOURCEID"</span>,k<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ctrl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"cv"</span>,index <span class="op">=</span> <span class="va">indices</span><span class="op">$</span><span class="va">index</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#define potential predictors:</span></span></span>
<span class="r-in"><span><span class="va">predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DEM"</span>,<span class="st">"TWI"</span>,<span class="st">"BLD"</span>,<span class="st">"Precip_cum"</span>,<span class="st">"cday"</span>,<span class="st">"MaxT_wrcc"</span>,</span></span>
<span class="r-in"><span><span class="st">"Precip_wrcc"</span>,<span class="st">"NDRE.M"</span>,<span class="st">"Bt"</span>,<span class="st">"MinT_wrcc"</span>,<span class="st">"Northing"</span>,<span class="st">"Easting"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#run ffs model with Leave Location out CV</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ffsmodel</span> <span class="op">&lt;-</span> <span class="fu">ffs</span><span class="op">(</span><span class="va">trainDat</span><span class="op">[</span>,<span class="va">predictors</span><span class="op">]</span>,<span class="va">trainDat</span><span class="op">$</span><span class="va">VW</span>,method<span class="op">=</span><span class="st">"rf"</span>,</span></span>
<span class="r-in"><span>tuneLength<span class="op">=</span><span class="fl">1</span>,trControl<span class="op">=</span><span class="va">ctrl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ffsmodel</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">ffsmodel</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#or only selected variables:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">ffsmodel</span>,plotType<span class="op">=</span><span class="st">"selected"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#compare to model without ffs:</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></span><span class="op">(</span><span class="va">trainDat</span><span class="op">[</span>,<span class="va">predictors</span><span class="op">]</span>,<span class="va">trainDat</span><span class="op">$</span><span class="va">VW</span>,method<span class="op">=</span><span class="st">"rf"</span>,</span></span>
<span class="r-in"><span>tuneLength<span class="op">=</span><span class="fl">1</span>, trControl<span class="op">=</span><span class="va">ctrl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## on linux machines, you can also run the ffs in parallel with forks:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"splotdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">spatial_cv</span> <span class="op">=</span> <span class="fu"><a href="CreateSpacetimeFolds.html">CreateSpacetimeFolds</a></span><span class="op">(</span><span class="va">splotdata</span>, spacevar <span class="op">=</span> <span class="st">"Biome"</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ctrl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"cv"</span>,index <span class="op">=</span> <span class="va">spatial_cv</span><span class="op">$</span><span class="va">index</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ffsmodel</span> <span class="op">&lt;-</span> <span class="fu">ffs</span><span class="op">(</span>predictors <span class="op">=</span> <span class="va">splotdata</span><span class="op">[</span>,<span class="fl">6</span><span class="op">:</span><span class="fl">16</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>               response <span class="op">=</span> <span class="va">splotdata</span><span class="op">$</span><span class="va">Species_richness</span>,</span></span>
<span class="r-in"><span>               tuneLength <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>               method <span class="op">=</span> <span class="st">"rf"</span>,</span></span>
<span class="r-in"><span>               trControl <span class="op">=</span> <span class="va">ctrl</span>,</span></span>
<span class="r-in"><span>               ntree <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>               seed <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>               cores <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanna Meyer, Carles Milà, Marvin Ludwig, Jan Linnenbrink, Fabian Schumacher.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

